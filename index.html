<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>REIS 2026 • WE ARE FAMILI</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: url('https://i.imgur.com/2u1hCwW.jpg') center/cover fixed no-repeat;
        color: #222;
    }

    /* Fons blanc translúcid perquè tot es llegeixi bé */
    .wrapper {
        background: rgba(255,255,255,0.88);
        min-height: 100vh;
        padding-bottom: 80px;
    }

    header {
        background: #b30000;
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 28px;
        font-weight: bold;
        text-shadow: 1px 1px 3px black;
    }

    nav {
        display: flex;
        justify-content: center;
        background: #d60000;
        padding: 10px;
        gap: 10px;
    }
    nav button {
        background: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
    }
    nav button.active {
        background: gold;
    }

    .page { display: none; padding: 20px; }
    .page.active { display: block; }

    .gift-box {
        background: #fff;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    label { font-weight: bold; display: block; margin-top: 10px; }
    textarea, input {
        width: 100%;
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
        margin-top: 5px;
    }

    .type-btns button {
        padding: 8px 15px;
        margin-right: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        background: #eee;
    }
    .type-btns button.selected { background: #4caf50; color: white; }

    .list-item {
        background: #fff8e1;
        padding: 10px;
        margin: 10px 0;
        border-left: 5px solid #ff9800;
        border-radius: 6px;
    }

    .delete-btn {
        background: #d80000;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 5px;
        cursor: pointer;
        float: right;
    }
</style>
</head>
<body>
<div class="wrapper">

<header>REIS 2026 • WE ARE FAMILI</header>

<nav>
    <button onclick="showPage('MARC')" id="tab_MARC">MARC</button>
    <button onclick="showPage('AINA')" id="tab_AINA">AINA</button>
    <button onclick="showPage('MAMA')" id="tab_MAMA">MAMÀ</button>
    <button onclick="showPage('PAPA')" id="tab_PAPA">PAPÀ</button>
</nav>

<div id="pages"></div>

</div>

<script>
const users = ["MARC", "AINA", "MAMA", "PAPA"];
const selectedType = {};

function init() {
    const container = document.getElementById("pages");
    users.forEach(user => {

        container.innerHTML += `
        <div class="page" id="page_${user}">

            <h2>${user}</h2>

            <div class="type-btns">
                <button id="need_${user}" onclick="setType('${user}', 'Necessitat')">Necessitat</button>
                <button id="want_${user}" onclick="setType('${user}', 'Caprici')">Caprici</button>
            </div>

            <div class="gift-box">
                <label>Descripció del regal:</label>
                <textarea id="desc_${user}" placeholder="Escriu aquí la descripció del regal"></textarea>

                <label>URL de la imatge (opcional):</label>
                <input id="img_${user}" type="text" placeholder="https://...">

                <label>Enllaç a la botiga:</label>
                <input id="link_${user}" type="text" placeholder="https://...">

                <button onclick="addGift('${user}')" style="margin-top:10px; padding:10px; font-weight:bold;">Afegir a la llista</button>
            </div>

            <h3>Llista de regals:</h3>
            <div id="list_${user}"></div>
        </div>`;

        updateList(user);
    });

    showPage("MARC");
}

function showPage(user) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(`page_${user}`).classList.add('active');

    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById(`tab_${user}`).classList.add('active');
}

function setType(user, type) {
    selectedType[user] = type;
    document.getElementById(`need_${user}`).classList.remove('selected');
    document.getElementById(`want_${user}`).classList.remove('selected');

    if(type === "Necessitat") document.getElementById(`need_${user}`).classList.add('selected');
    else document.getElementById(`want_${user}`).classList.add('selected');
}

function addGift(user) {
    const desc = document.getElementById(`desc_${user}`).value;
    const img = document.getElementById(`img_${user}`).value;
    const link = document.getElementById(`link_${user}`).value;

    if (!desc && !img && !link) return;

    const gift = {
        type: selectedType[user] || "",
        desc,
        img,
        link
    };

    const list = JSON.parse(localStorage.getItem(user) || "[]");
    list.push(gift);
    localStorage.setItem(user, JSON.stringify(list));

    document.getElementById(`desc_${user}`).value = "";
    document.getElementById(`img_${user}`).value = "";
    document.getElementById(`link_${user}`).value = "";

    updateList(user);
}

function deleteGift(user, index) {
    const list = JSON.parse(localStorage.getItem(user) || "[]");
    list.splice(index, 1);
    localStorage.setItem(user, JSON.stringify(list));
    updateList(user);
}

function updateList(user) {
    const list = JSON.parse(localStorage.getItem(user) || "[]");
    const container = document.getElementById(`list_${user}`);
    container.innerHTML = "";

    list.forEach((g, i) => {
        container.innerHTML += `
            <div class="list-item">
                <strong>${g.type}</strong><br>
                ${g.desc ? g.desc + '<br>' : ''}
                ${g.img ? `<img src="${g.img}" style="max-width:120px; display:block; margin:5px 0;">` : ''}
                ${g.link ? `<a href="${g.link}" target="_blank">Vés a la botiga</a><br>` : ''}
                <button class="delete-btn" onclick="deleteGift('${user}', ${i})">Esborrar</button>
            </div>`;
    });
}

init();
</script>

</body>
</html>
