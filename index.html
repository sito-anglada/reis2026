<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>REIS 2026 — WE ARE FAMILI</title>
<style>
  :root{
    --bg: #ffffff;
    --accent-marc: #0b79d0;
    --accent-aina: #8a2be2;
    --accent-mama: #2e7d32;
    --accent-papa: #ff8c00;
    --header: #b30000;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:Arial,Helvetica,sans-serif;color:#222}
  header{background:var(--header);color:#fff;padding:18px 12px;text-align:center;font-size:26px;font-weight:700}
  nav{display:flex;justify-content:center;gap:18px;padding:10px;background:#900;flex-wrap:wrap}
  nav button{background:transparent;border:none;color:#fff;padding:10px 16px;font-size:16px;cursor:pointer;border-radius:6px}
  nav button.active{box-shadow:0 2px 0 rgba(0,0,0,0.15);font-weight:700}
  .container{max-width:900px;margin:22px auto;padding:0 12px}
  .tab-header{font-size:28px;font-weight:800;margin:8px 0}
  .controls{display:flex;flex-direction:column;gap:8px;background:#fff;padding:14px;border-radius:8px;border:1px solid #e2e2e2}
  label{font-weight:700;margin-top:6px;display:block}
  input[type="text"], textarea{width:100%;padding:10px;border:1px solid #cfcfcf;border-radius:6px;font-size:15px;box-sizing:border-box}
  textarea{min-height:72px;resize:vertical}
  .type-row{display:flex;gap:8px;align-items:center}
  .type-row input{margin-right:6px}
  .add-btn{margin-top:8px;background:#b30000;color:#fff;border:none;padding:12px;border-radius:8px;font-weight:700;cursor:pointer}
  .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:16px}
  .gift-item{background:#fff;padding:12px;border-radius:8px;border-left:6px solid #ddd;position:relative;overflow:hidden}
  .gift-item img{max-width:140px;display:block;margin-top:8px;border-radius:6px}
  .gift-meta{font-size:13px;color:#555;margin-bottom:6px}
  .delete-btn{position:absolute;right:10px;top:10px;background:#444;color:#fff;border:none;padding:6px 9px;border-radius:6px;cursor:pointer}
  .gift-actions{margin-top:8px}
  .gift-actions a{display:inline-block;margin-right:8px;color:inherit;text-decoration:underline}
  /* color accents per tab */
  .accent-marc{border-left-color:var(--accent-marc)}
  .accent-aina{border-left-color:var(--accent-aina)}
  .accent-mama{border-left-color:var(--accent-mama)}
  .accent-papa{border-left-color:var(--accent-papa)}
  /* small screens */
  @media (max-width:600px){ header{font-size:20px} .tab-header{font-size:22px} .gift-item img{max-width:120px} }
</style>
</head>
<body>

<header>REIS 2026 — WE ARE FAMILI</header>

<nav>
  <button id="btn-marc">MARC</button>
  <button id="btn-aina">AINA</button>
  <button id="btn-mama">MAMÀ</button>
  <button id="btn-papa">PAPÀ</button>
</nav>

<div class="container">
  <!-- dynamic header showing current tab name -->
  <div id="tabName" class="tab-header">MARC</div>

  <!-- controls (labels included) -->
  <div class="controls" id="controls">
    <div class="type-row">
      <label style="margin:0 8px 0 0">Tipus:</label>
      <label><input type="radio" name="type" value="Necessitat" checked> Necessitat</label>
      <label><input type="radio" name="type" value="Caprici"> Caprici</label>
    </div>

    <div>
      <label for="textInput">Descripció / Nom del regal</label>
      <textarea id="textInput" placeholder="Escriu aquí la descripció o el nom del regal"></textarea>
    </div>

    <div>
      <label for="imgInput">URL de la imatge (opcional)</label>
      <input id="imgInput" type="text" placeholder="https://exemple.com/imatge.jpg">
    </div>

    <div>
      <label for="urlInput">Enllaç al producte / botiga (opcional)</label>
      <input id="urlInput" type="text" placeholder="https://amazon.es/…">
    </div>

    <button class="add-btn" id="addBtn">Afegir a la llista</button>
  </div>

  <h3 style="margin-top:18px">Regals afegits</h3>
  <div id="giftList" class="grid"></div>
</div>

<script>
(function(){
  // tabs config
  const tabs = ['marc','aina','mama','papa'];
  const btns = {
    marc: document.getElementById('btn-marc'),
    aina: document.getElementById('btn-aina'),
    mama: document.getElementById('btn-mama'),
    papa: document.getElementById('btn-papa')
  };
  let current = 'marc';

  // init buttons
  tabs.forEach(t=>{
    btns[t].addEventListener('click', ()=> switchTab(t));
  });

  // storage key
  function keyFor(tab){ return 'reis2026_' + tab; }

  // load data for tab
  function load(tab){
    try {
      return JSON.parse(localStorage.getItem(keyFor(tab))) || [];
    } catch(e){ return []; }
  }
  // save
  function save(tab, arr){ localStorage.setItem(keyFor(tab), JSON.stringify(arr)); }

  // switch tab
  function switchTab(tab){
    current = tab;
    // header name
    document.getElementById('tabName').textContent = tab.toUpperCase();
    // active button style
    Object.keys(btns).forEach(k=> btns[k].classList.remove('active'));
    btns[tab].classList.add('active');
    // update accent of existing items on render
    render();
  }

  // helper to get selected type
  function selectedType(){
    const r = document.querySelector("input[name='type']:checked");
    return r ? r.value : 'Necessitat';
  }

  // add item
  document.getElementById('addBtn').addEventListener('click', ()=>{
    const text = document.getElementById('textInput').value.trim();
    const img  = document.getElementById('imgInput').value.trim();
    const url  = document.getElementById('urlInput').value.trim();
    const type = selectedType();

    if(!text && !img && !url){
      alert('Introdueix com a mínim una descripció, imatge o enllaç.');
      return;
    }

    const arr = load(current);
    arr.push({type, text, img, url});
    save(current, arr);

    // clear fields
    document.getElementById('textInput').value = '';
    document.getElementById('imgInput').value = '';
    document.getElementById('urlInput').value = '';

    render();
  });

  // delete item
  window.deleteGift = function(index){
    const arr = load(current);
    arr.splice(index,1);
    save(current, arr);
    render();
  };

  // color class mapping
  function accentClass(tab){
    if(tab==='marc') return 'accent-marc';
    if(tab==='aina') return 'accent-aina';
    if(tab==='mama') return 'accent-mama';
    return 'accent-papa';
  }

  // render list for current tab
  function render(){
    const container = document.getElementById('giftList');
    container.innerHTML = '';
    const arr = load(current);

    arr.forEach((g,i)=>{
      const div = document.createElement('div');
      div.className = 'gift-item ' + accentClass(current);

      // meta line
      const meta = document.createElement('div');
      meta.className = 'gift-meta';
      meta.textContent = `${g.type || ''}` + (g.text ? ` — ${g.text}` : '');
      div.appendChild(meta);

      // image preview if exists
      if(g.img){
        const img = document.createElement('img');
        img.src = g.img;
        img.alt = 'imatge regal';
        // if image fails to load, hide it silently
        img.onerror = ()=> { img.style.display='none'; };
        div.appendChild(img);
      }

      // link if exists
      if(g.url){
        const p = document.createElement('div');
        p.className = 'gift-actions';
        const a = document.createElement('a');
        a.href = g.url;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = 'Veure enllaç al producte';
        p.appendChild(a);
        div.appendChild(p);
      }

      // delete button
      const btn = document.createElement('button');
      btn.className = 'delete-btn';
      btn.textContent = 'Esborrar';
      btn.onclick = ()=> deleteGift(i);
      div.appendChild(btn);

      container.appendChild(div);
    });

    // if empty, show small hint
    if(arr.length===0){
      container.innerHTML = '<em style="color:#666">Cap regal afegit encara per aquesta pestanya.</em>';
    }
  }

  // initial load: set buttons and render
  switchTab(current);
  render();

  // expose deleteGift for button onclick scope
  function deleteGift(idx){ window.deleteGift(idx); }
})();
</script>

</body>
</html>
